{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{withRouter,Link}from'react-router-dom';import{getProject,updateProject,deleteProject}from'../../services/apiCalls';var confirm=window.confirm;var EditProject=/*#__PURE__*/function(_Component){_inherits(EditProject,_Component);var _super=_createSuper(EditProject);function EditProject(props){var _this;_classCallCheck(this,EditProject);_this=_super.call(this,props);_this.handleChange=function(e,stateName){// sets e.target.value to whatever state is named\n_this.setState(_defineProperty({},stateName,e.target.value));};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(_this.state.inputName){_context.next=5;break;}_this.setState({errMsg:'Project name is required!'});_context.next=16;break;case 5:_context.prev=5;_context.next=8;return updateProject(_this.props.match.params.id,{name:_this.state.inputName,location:_this.state.inputLocation,description:_this.state.inputDescription});case 8:response=_context.sent;_this.props.history.push(\"/projects/\".concat(_this.props.match.params.id));_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](5);console.log(_context.t0.message);_this.setState({errMsg:_context.t0.message});case 16:case\"end\":return _context.stop();}}},_callee,null,[[5,12]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleDelete=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var confirm1,confirm2,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:confirm1=confirm('Do you want to delete this project? WARNING: PERMANENT!!!');if(!confirm1){_context2.next=16;break;}confirm2=confirm('FINAL WARNING: DELETION PERMANENT! PROCEED?!?');if(!confirm2){_context2.next=16;break;}_context2.prev=4;_context2.next=7;return deleteProject(_this.props.match.params.id);case 7:response=_context2.sent;console.log(response);_this.props.history.push('/');_context2.next=16;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](4);console.log(_context2.t0.message);_this.setState({errMsg:_context2.t0.message});case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[4,12]]);}));_this.state={inputName:'',inputLocation:'',inputDescription:'',errMsg:''};return _this;}// name required, location and description not required \n_createClass(EditProject,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return getProject(this.props.match.params.id);case 3:response=_context3.sent;this.setState({inputName:response.name,inputLocation:response.location,inputDescription:response.description});_context3.next=11;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0.message);this.setState({errMsg:_context3.t0.message});case 11:case\"end\":return _context3.stop();}}},_callee3,this,[[0,7]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"Page\"},/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"h1\",null,\" Edit Project Info \"),/*#__PURE__*/React.createElement(\"form\",{className:\"UpdateForm\",onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"projectName\"},\"Project Name\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:this.state.inputName,onChange:function onChange(e){return _this2.handleChange(e,'inputName');},name:\"projectName\"}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"location\"},\"Location\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:this.state.inputLocation,onChange:function onChange(e){return _this2.handleChange(e,'inputLocation');},name:\"location\"}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"description\"},\"Description\"),/*#__PURE__*/React.createElement(\"textarea\",{value:this.state.inputDescription,onChange:function onChange(e){return _this2.handleChange(e,'inputDescription');},name:\"description\"}),/*#__PURE__*/React.createElement(\"button\",null,\"Submit\"),/*#__PURE__*/React.createElement(Link,{to:\"/projects/\".concat(this.props.match.params.id)},/*#__PURE__*/React.createElement(\"button\",null,\"Cancel\")))),/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"h1\",null,\" Delete this project?\"),/*#__PURE__*/React.createElement(\"button\",{className:\"deleteButton\",onClick:this.handleDelete},\"Delete (PERMANENT)\")));}}]);return EditProject;}(Component);export default withRouter(EditProject);","map":{"version":3,"sources":["/Users/bowserhsu/Documents/React/eitri-site-journal/client/src/components/Projects/EditProject.jsx"],"names":["React","Component","withRouter","Link","getProject","updateProject","deleteProject","confirm","window","EditProject","props","handleChange","e","stateName","setState","target","value","handleSubmit","preventDefault","state","inputName","errMsg","match","params","id","name","location","inputLocation","description","inputDescription","response","history","push","console","log","message","handleDelete","confirm1","confirm2"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withRouter, Link } from 'react-router-dom'\nimport { getProject, updateProject, deleteProject } from '../../services/apiCalls'\n\nconst confirm = window.confirm\n\nclass EditProject extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      inputName: '',\n      inputLocation: '',\n      inputDescription: '',\n      errMsg: ''\n    }\n  }\n\n  // name required, location and description not required \n  async componentDidMount() {\n    try {\n      const response = await getProject(this.props.match.params.id)\n      this.setState({\n        inputName: response.name,\n        inputLocation: response.location,\n        inputDescription: response.description \n      })\n    } catch (error) {\n      console.log(error.message)\n      this.setState({\n        errMsg: error.message \n      })\n    }\n  }\n\n  handleChange = (e, stateName) => {\n    // sets e.target.value to whatever state is named\n    this.setState({\n      [stateName]: e.target.value \n    })\n  }\n\n  handleSubmit = async (e) => {\n    e.preventDefault()\n\n    if (!this.state.inputName) {\n      this.setState({\n        errMsg: 'Project name is required!'\n      })\n    } else {\n      try {\n        const response = await updateProject(this.props.match.params.id,{\n          name: this.state.inputName,\n          location: this.state.inputLocation,\n          description: this.state.inputDescription \n        })\n\n        this.props.history.push(`/projects/${this.props.match.params.id}`)\n      } catch (error) {\n        console.log(error.message)\n        this.setState({\n          errMsg: error.message \n        })\n      }\n    }\n  }\n\n  handleDelete = async () => {\n    const confirm1 = confirm('Do you want to delete this project? WARNING: PERMANENT!!!')\n    \n    if (confirm1) {\n      const confirm2 = confirm('FINAL WARNING: DELETION PERMANENT! PROCEED?!?')\n\n      if (confirm2) {\n        try {\n          const response = await deleteProject(this.props.match.params.id)\n\n          console.log(response)\n\n          this.props.history.push('/')\n        } catch (error) {\n          console.log(error.message) \n          this.setState({\n            errMsg: error.message \n          })\n        }\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"Page\">\n        <section>\n        <h1> Edit Project Info </h1>\n        <form className=\"UpdateForm\" onSubmit={this.handleSubmit}>\n          <label htmlFor=\"projectName\">Project Name</label>\n          <input type=\"text\" value={this.state.inputName} onChange={e => this.handleChange(e, 'inputName')} name=\"projectName\" />\n\n          <label htmlFor=\"location\">Location</label>\n          <input type=\"text\" value={this.state.inputLocation} onChange={e => this.handleChange(e, 'inputLocation')} name=\"location\" />\n\n          <label htmlFor=\"description\">Description</label>\n          <textarea value={this.state.inputDescription} onChange={e => this.handleChange(e, 'inputDescription')} name=\"description\" />\n\n            <button>Submit</button>\n            <Link to={`/projects/${this.props.match.params.id}`}><button>Cancel</button></Link>\n\n        </form>\n        </section>\n          \n        <section>\n          <h1> Delete this project?</h1>\n          <button className=\"deleteButton\" onClick={this.handleDelete}>Delete (PERMANENT)</button>\n        </section>\n      </div>\n    )\n  }\n}\n\nexport default withRouter(EditProject)"]},"metadata":{},"sourceType":"module"}