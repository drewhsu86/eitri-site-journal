{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{withRouter,Link}from'react-router-dom';import{signup}from'../../services/apiUsers';var Signup=/*#__PURE__*/function(_Component){_inherits(Signup,_Component);var _super=_createSuper(Signup);function Signup(props){var _this;_classCallCheck(this,Signup);_this=_super.call(this,props);_this.handleChange=function(e,stateName){// sets e.target.value to whatever state is named\n_this.setState(_defineProperty({},stateName,e.target.value));};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();// submit using the username and password in the form \n// only allow submit if password is length 6 or greater \nif(!(_this.state.inputPassword.length>=6&&_this.state.inputUsername)){_context.next=17;break;}_context.prev=2;_context.next=5;return signup({username:_this.state.inputUsername,password:_this.state.inputPassword});case 5:response=_context.sent;_context.next=8;return _this.props.setUser();case 8:_this.props.history.push('/');_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);console.log(_context.t0.message);_this.setState({errMsg:_context.t0.message});case 15:_context.next=18;break;case 17:_this.setState({errMsg:'Password needs to be at least 6 characters.'});case 18:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={inputUsername:'',inputPassword:'',errMsg:''};return _this;}// password needs at least 6 characters \n// username and password each have a handleChange and are tied to the value of the input \n_createClass(Signup,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"Page\"},/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"form\",{className:\"SignupForm\",onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"h1\",null,\"Register An Account\"),/*#__PURE__*/React.createElement(\"h4\",null,\" Passwords need to be at least 6 characters long! \"),this.state.errMsg?/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},this.state.errMsg):null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"username\"},\"Username\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:this.state.inputUsername,onChange:function onChange(e){return _this2.handleChange(e,'inputUsername');},name:\"uesrname\"}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",value:this.state.inputPassword,onChange:function onChange(e){return _this2.handleChange(e,'inputPassword');},name:\"password\"}),/*#__PURE__*/React.createElement(\"button\",null,\" Submit \")),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(Link,{to:\"/\"},\"Have an account? Log in here\"))));}}]);return Signup;}(Component);export default withRouter(Signup);","map":{"version":3,"sources":["/Users/bowserhsu/Documents/React/eitri-site-journal/client/src/components/User/Signup.jsx"],"names":["React","Component","withRouter","Link","signup","Signup","props","handleChange","e","stateName","setState","target","value","handleSubmit","preventDefault","state","inputPassword","length","inputUsername","username","password","response","setUser","history","push","console","log","message","errMsg"],"mappings":"ssCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,UAAT,CAAqBC,IAArB,KAAiC,kBAAjC,CACA,OAASC,MAAT,KAAuB,yBAAvB,C,GAEMC,CAAAA,M,gGACJ,gBAAYC,KAAZ,CAAmB,wCACjB,uBAAMA,KAAN,EADiB,MAanBC,YAbmB,CAaJ,SAACC,CAAD,CAAIC,SAAJ,CAAkB,CAC/B;AACA,MAAKC,QAAL,oBACGD,SADH,CACeD,CAAC,CAACG,MAAF,CAASC,KADxB,GAGD,CAlBkB,OAoBnBC,YApBmB,0FAoBJ,iBAAOL,CAAP,+HACbA,CAAC,CAACM,cAAF,GACA;AAEA;AAJa,KAKT,MAAKC,KAAL,CAAWC,aAAX,CAAyBC,MAAzB,EAAmC,CAAnC,EAAwC,MAAKF,KAAL,CAAWG,aAL1C,iEAOcd,CAAAA,MAAM,CAAC,CAC5Be,QAAQ,CAAE,MAAKJ,KAAL,CAAWG,aADO,CAE5BE,QAAQ,CAAE,MAAKL,KAAL,CAAWC,aAFO,CAAD,CAPpB,QAOHK,QAPG,qCAaH,OAAKf,KAAL,CAAWgB,OAAX,EAbG,QAeT,MAAKhB,KAAL,CAAWiB,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,EAfS,iFAiBTC,OAAO,CAACC,GAAR,CAAY,YAAMC,OAAlB,EACA,MAAKjB,QAAL,CAAc,CACZkB,MAAM,CAAE,YAAMD,OADF,CAAd,EAlBS,uCAuBX,MAAKjB,QAAL,CAAc,CACZkB,MAAM,CAAE,6CADI,CAAd,EAvBW,qEApBI,+DAGjB,MAAKb,KAAL,CAAa,CACXG,aAAa,CAAE,EADJ,CAEXF,aAAa,CAAE,EAFJ,CAGXY,MAAM,CAAE,EAHG,CAAb,CAHiB,aAQlB,CAED;AACA;0DAsCS,iBAEL,mBACE,2BAAK,SAAS,CAAC,MAAf,eACE,gDACA,4BAAM,SAAS,CAAC,YAAhB,CAA6B,QAAQ,CAAE,KAAKf,YAA5C,eACI,oDADJ,cAEI,mFAFJ,CAGG,KAAKE,KAAL,CAAWa,MAAX,cAAoB,yBAAG,SAAS,CAAC,OAAb,EAAsB,KAAKb,KAAL,CAAWa,MAAjC,CAApB,CAAmE,IAHtE,cAKE,6BAAO,OAAO,CAAC,UAAf,aALF,cAME,6BAAO,IAAI,CAAC,MAAZ,CAAmB,KAAK,CAAE,KAAKb,KAAL,CAAWG,aAArC,CAAoD,QAAQ,CAAE,kBAAAV,CAAC,QAAI,CAAA,MAAI,CAACD,YAAL,CAAkBC,CAAlB,CAAqB,eAArB,CAAJ,EAA/D,CAA0G,IAAI,CAAC,UAA/G,EANF,cAQE,6BAAO,OAAO,CAAC,UAAf,aARF,cASE,6BAAO,IAAI,CAAC,UAAZ,CAAuB,KAAK,CAAE,KAAKO,KAAL,CAAWC,aAAzC,CAAwD,QAAQ,CAAE,kBAAAR,CAAC,QAAI,CAAA,MAAI,CAACD,YAAL,CAAkBC,CAAlB,CAAqB,eAArB,CAAJ,EAAnE,CAA8G,IAAI,CAAC,UAAnH,EATF,cAWE,6CAXF,CADA,cAcA,0CACE,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,iCADF,CAdA,CADF,CADF,CAuBH,C,oBA3EkBP,S,EA8ErB,cAAeC,CAAAA,UAAU,CAACG,MAAD,CAAzB","sourcesContent":["import React, { Component } from 'react'\nimport { withRouter, Link } from 'react-router-dom'\nimport { signup } from '../../services/apiUsers'\n\nclass Signup extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      inputUsername: '',\n      inputPassword: '',\n      errMsg: ''\n    }\n  }\n\n  // password needs at least 6 characters \n  // username and password each have a handleChange and are tied to the value of the input \n\n  handleChange = (e, stateName) => {\n    // sets e.target.value to whatever state is named\n    this.setState({\n      [stateName]: e.target.value \n    })\n  }\n\n  handleSubmit = async (e) => {\n    e.preventDefault()\n    // submit using the username and password in the form \n\n    // only allow submit if password is length 6 or greater \n    if (this.state.inputPassword.length >= 6 && this.state.inputUsername) {\n      try {\n        const response = await signup({\n          username: this.state.inputUsername,\n          password: this.state.inputPassword\n        })\n\n        // if token is successfully received, set the user data \n        await this.props.setUser()\n\n        this.props.history.push('/')\n      } catch (error) {\n        console.log(error.message)\n        this.setState({\n          errMsg: error.message \n        })\n      }\n    } else {\n      this.setState({\n        errMsg: 'Password needs to be at least 6 characters.'\n      })\n    }\n  }\n\n  render() {\n    \n      return (\n        <div className=\"Page\">\n          <section>\n          <form className=\"SignupForm\" onSubmit={this.handleSubmit}>\n              <h1>Register An Account</h1>\n              <h4> Passwords need to be at least 6 characters long! </h4>\n            {this.state.errMsg ? <p className=\"error\">{this.state.errMsg}</p> : null}\n\n            <label htmlFor=\"username\">Username</label>\n            <input type=\"text\" value={this.state.inputUsername} onChange={e => this.handleChange(e, 'inputUsername')} name=\"uesrname\" />\n\n            <label htmlFor=\"password\">Password</label>\n            <input type=\"password\" value={this.state.inputPassword} onChange={e => this.handleChange(e, 'inputPassword')} name=\"password\" />\n\n            <button> Submit </button>\n          </form>\n          <p>\n            <Link to=\"/\">Have an account? Log in here</Link>\n          </p>\n          </section>\n        </div>\n      )\n    \n  }\n}\n\nexport default withRouter(Signup)\n"]},"metadata":{},"sourceType":"module"}