{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import FileBase64 from'react-file-base64';import{addImage,imgurImage}from'../../services/apiCalls';var IMGUR_BUTTON='Upload Using Imgur Or Image URL';var IMGUR_LOADING='Uploading...';var AddImage=/*#__PURE__*/function(_Component){_inherits(AddImage,_Component);var _super=_createSuper(AddImage);function AddImage(props){var _this;_classCallCheck(this,AddImage);_this=_super.call(this,props);_this.handleChange=function(e,stateName){// sets e.target.value to whatever state is named\n_this.setState(_defineProperty({},stateName,e.target.value));};_this.handleImgur=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(file){var response,addResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(_this.state.imgurBtn===IMGUR_BUTTON)){_context.next=19;break;}// change the button state and then api call \n_this.setState({imgurBtn:IMGUR_LOADING,imgFile:file});_context.prev=2;_context.next=5;return imgurImage({base64:file.base64.split(',')[1],name:file.file.name});case 5:response=_context.sent;console.log(response);_context.next=9;return addImage(_this.props.entryID,response.link);case 9:addResponse=_context.sent;console.log(addResponse);_this.setState({imgFile:null,errMsg:'Imgur Upload Successful',imgurBtn:IMGUR_BUTTON,inputURL:''});_this.props.entryReset();_context.next=19;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](2);console.log(_context.t0.message);_this.setState({imgFile:null,errMsg:_context.t0.message,imgurBtn:IMGUR_BUTTON});case 19:case\"end\":return _context.stop();}}},_callee,null,[[2,15]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleAddImage=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return addImage(_this.props.entryID,_this.state.inputURL);case 3:response=_context2.sent;console.log(response);_context2.next=11;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0.message);_this.setState({errMsg:_context2.t0.message});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));_this.state={imgFile:null,inputURL:'',errMsg:'',imgurBtn:IMGUR_BUTTON};return _this;}_createClass(AddImage,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"AddImage\"},/*#__PURE__*/React.createElement(\"h3\",null,this.state.imgurBtn),this.state.errMsg?/*#__PURE__*/React.createElement(\"h4\",null,this.state.errMsg):null,/*#__PURE__*/React.createElement(FileBase64,{multiple:false,onDone:this.handleImgur}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"inputURL\"},\"Enter Or Edit Image URL\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:this.state.inputURL,onChange:function onChange(e){return _this2.handleChange(e,'inputURL');}}),this.state.inputURL?/*#__PURE__*/React.createElement(\"button\",{onClick:this.handleAddImage},\"Add Image URL To Entry\"):null);}}]);return AddImage;}(Component);export{AddImage as default};","map":{"version":3,"sources":["/Users/bowserhsu/Documents/React/eitri-site-journal/client/src/components/Entries/AddImage.jsx"],"names":["React","Component","FileBase64","addImage","imgurImage","IMGUR_BUTTON","IMGUR_LOADING","AddImage","props","handleChange","e","stateName","setState","target","value","handleImgur","file","state","imgurBtn","imgFile","base64","split","name","response","console","log","entryID","link","addResponse","errMsg","inputURL","entryReset","message","handleAddImage"],"mappings":"ssCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,UAAP,KAAuB,mBAAvB,CACA,OAASC,QAAT,CAAmBC,UAAnB,KAAqC,yBAArC,CAEA,GAAMC,CAAAA,YAAY,CAAG,iCAArB,CACA,GAAMC,CAAAA,aAAa,CAAG,cAAtB,C,GAEqBC,CAAAA,Q,oGACnB,kBAAYC,KAAZ,CAAmB,0CACjB,uBAAMA,KAAN,EADiB,MAWnBC,YAXmB,CAWJ,SAACC,CAAD,CAAIC,SAAJ,CAAkB,CAC/B;AACA,MAAKC,QAAL,oBACGD,SADH,CACeD,CAAC,CAACG,MAAF,CAASC,KADxB,GAGD,CAhBkB,OAkBnBC,WAlBmB,0FAkBL,iBAAOC,IAAP,gJACR,MAAKC,KAAL,CAAWC,QAAX,GAAwBb,YADhB,2BAEV;AACA,MAAKO,QAAL,CAAc,CACZM,QAAQ,CAAEZ,aADE,CAEZa,OAAO,CAAEH,IAFG,CAAd,EAHU,sCAQeZ,CAAAA,UAAU,CAAC,CAChCgB,MAAM,CAAEJ,IAAI,CAACI,MAAL,CAAYC,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CADwB,CAEhCC,IAAI,CAAEN,IAAI,CAACA,IAAL,CAAUM,IAFgB,CAAD,CARzB,QAQFC,QARE,eAaRC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EAbQ,sBAekBpB,CAAAA,QAAQ,CAAC,MAAKK,KAAL,CAAWkB,OAAZ,CAAqBH,QAAQ,CAACI,IAA9B,CAf1B,QAeFC,WAfE,eAiBRJ,OAAO,CAACC,GAAR,CAAYG,WAAZ,EAEA,MAAKhB,QAAL,CAAc,CACZO,OAAO,CAAE,IADG,CAEZU,MAAM,CAAE,yBAFI,CAGZX,QAAQ,CAAEb,YAHE,CAIZyB,QAAQ,CAAE,EAJE,CAAd,EAOA,MAAKtB,KAAL,CAAWuB,UAAX,GA1BQ,iFA4BRP,OAAO,CAACC,GAAR,CAAY,YAAMO,OAAlB,EACA,MAAKpB,QAAL,CAAc,CACZO,OAAO,CAAE,IADG,CAEZU,MAAM,CAAE,YAAMG,OAFF,CAGZd,QAAQ,CAAEb,YAHE,CAAd,EA7BQ,qEAlBK,qEAwDnB4B,cAxDmB,sEAwDF,6LAEU9B,CAAAA,QAAQ,CAAC,MAAKK,KAAL,CAAWkB,OAAZ,CAAqB,MAAKT,KAAL,CAAWa,QAAhC,CAFlB,QAEPP,QAFO,gBAIbC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EAJa,mFAOXC,OAAO,CAACC,GAAR,CAAY,aAAMO,OAAlB,EACA,MAAKpB,QAAL,CAAc,CACZiB,MAAM,CAAE,aAAMG,OADF,CAAd,EARW,sEAxDE,GAGjB,MAAKf,KAAL,CAAa,CACXE,OAAO,CAAE,IADE,CAEXW,QAAQ,CAAE,EAFC,CAGXD,MAAM,CAAE,EAHG,CAIXX,QAAQ,CAAEb,YAJC,CAAb,CAHiB,aASlB,C,4DA6DQ,iBACP,mBACE,2BAAK,SAAS,CAAC,UAAf,eACE,8BAAK,KAAKY,KAAL,CAAWC,QAAhB,CADF,CAII,KAAKD,KAAL,CAAWY,MAAX,cAAoB,8BAAK,KAAKZ,KAAL,CAAWY,MAAhB,CAApB,CAAmD,IAJvD,cAOE,oBAAC,UAAD,EACE,QAAQ,CAAE,KADZ,CAEE,MAAM,CAAE,KAAKd,WAFf,EAPF,cAYE,6BAAO,OAAO,CAAC,UAAf,4BAZF,cAaE,6BACE,IAAI,CAAC,MADP,CAEE,KAAK,CAAE,KAAKE,KAAL,CAAWa,QAFpB,CAGE,QAAQ,CAAE,kBAAApB,CAAC,QAAI,CAAA,MAAI,CAACD,YAAL,CAAkBC,CAAlB,CAAqB,UAArB,CAAJ,EAHb,EAbF,CAoBI,KAAKO,KAAL,CAAWa,QAAX,cAAsB,8BAAQ,OAAO,CAAE,KAAKG,cAAtB,2BAAtB,CAA8F,IApBlG,CADF,CAyBD,C,sBAjGmChC,S,SAAjBM,Q","sourcesContent":["import React, { Component } from 'react'\nimport FileBase64 from 'react-file-base64'\nimport { addImage, imgurImage } from '../../services/apiCalls'\n\nconst IMGUR_BUTTON = 'Upload Using Imgur Or Image URL'\nconst IMGUR_LOADING = 'Uploading...'\n\nexport default class AddImage extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      imgFile: null,\n      inputURL: '',\n      errMsg: '',\n      imgurBtn: IMGUR_BUTTON\n    }\n  }\n\n  handleChange = (e, stateName) => {\n    // sets e.target.value to whatever state is named\n    this.setState({\n      [stateName]: e.target.value \n    })\n  }\n\n  handleImgur = async (file) => {\n    if (this.state.imgurBtn === IMGUR_BUTTON) {\n      // change the button state and then api call \n      this.setState({\n        imgurBtn: IMGUR_LOADING,\n        imgFile: file \n      })\n      try {\n        const response = await imgurImage({\n          base64: file.base64.split(',')[1],\n          name: file.file.name \n        })\n\n        console.log(response)\n\n        const addResponse = await addImage(this.props.entryID, response.link)\n\n        console.log(addResponse)\n\n        this.setState({\n          imgFile: null,\n          errMsg: 'Imgur Upload Successful',\n          imgurBtn: IMGUR_BUTTON,\n          inputURL: ''\n        })\n\n        this.props.entryReset()\n      } catch (error) {\n        console.log(error.message)\n        this.setState({\n          imgFile: null,\n          errMsg: error.message,\n          imgurBtn: IMGUR_BUTTON\n        })\n      }\n    }\n  }\n\n  handleAddImage = async () => {\n    try {\n      const response = await addImage(this.props.entryID, this.state.inputURL)\n\n      console.log(response) \n\n    } catch (error) {\n        console.log(error.message)\n        this.setState({\n          errMsg: error.message\n        })\n      }\n  }\n\n  render() {\n    return (\n      <div className=\"AddImage\">\n        <h3>{this.state.imgurBtn}</h3>\n\n        {\n          this.state.errMsg ? <h4>{this.state.errMsg}</h4> : null \n        }\n\n        <FileBase64\n          multiple={false}\n          onDone={this.handleImgur}\n        />\n\n        <label htmlFor=\"inputURL\">Enter Or Edit Image URL</label>\n        <input \n          type=\"text\"\n          value={this.state.inputURL}\n          onChange={e => this.handleChange(e, 'inputURL')}\n        />\n        \n        {\n          this.state.inputURL ? <button onClick={this.handleAddImage}>Add Image URL To Entry</button> : null \n        }\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}