{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{withRouter,Link}from'react-router-dom';import{getEntry,updateEntry,deleteEntry}from'../../services/apiCalls';var confirm=window.confirm;var EditEntry=/*#__PURE__*/function(_Component){_inherits(EditEntry,_Component);var _super=_createSuper(EditEntry);function EditEntry(props){var _this;_classCallCheck(this,EditEntry);_this=_super.call(this,props);_this.handleChange=function(e,stateName){// sets e.target.value to whatever state is named\n_this.setState(_defineProperty({},stateName,e.target.value));};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(_this.state.inputNotes){_context.next=5;break;}_this.setState({errMsg:'Entry name is required!'});_context.next=16;break;case 5:_context.prev=5;_context.next=8;return updateEntry(_this.props.match.params.id,{notes:_this.state.inputNotes});case 8:response=_context.sent;_this.props.history.push(\"/entries/\".concat(_this.props.match.params.id));_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](5);console.log(_context.t0.message);_this.setState({errMsg:_context.t0.message});case 16:case\"end\":return _context.stop();}}},_callee,null,[[5,12]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleDelete=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var confirm1,confirm2,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:confirm1=confirm('Do you want to delete this entry? WARNING: PERMANENT!!!');if(!confirm1){_context2.next=16;break;}confirm2=confirm('FINAL WARNING: DELETION PERMANENT! PROCEED?!?');if(!confirm2){_context2.next=16;break;}_context2.prev=4;_context2.next=7;return deleteEntry(_this.props.match.params.id);case 7:response=_context2.sent;console.log(response);_this.props.history.push(\"/projects/\".concat(_this.state.projectID));_context2.next=16;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](4);console.log(_context2.t0.message);_this.setState({errMsg:_context2.t0.message});case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[4,12]]);}));_this.state={inputNotes:'',projectID:'',errMsg:''};return _this;}_createClass(EditEntry,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return getEntry(this.props.match.params.id);case 3:response=_context3.sent;this.setState({inputNotes:response.notes,projectID:response.project._id});_context3.next=11;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0.message);this.setState({errMsg:_context3.t0.message});case 11:case\"end\":return _context3.stop();}}},_callee3,this,[[0,7]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"Page\"},/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Edit the note for this entry\"),/*#__PURE__*/React.createElement(\"form\",{className:\"UpdateForm\",onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"entryName\"},\"Entry Notes\"),/*#__PURE__*/React.createElement(\"textarea\",{value:this.state.inputNotes,onChange:function onChange(e){return _this2.handleChange(e,'inputNotes');},name:\"entryName\"}),/*#__PURE__*/React.createElement(\"button\",null,\"Edit Entry\"),/*#__PURE__*/React.createElement(Link,{to:\"/entries/\".concat(this.props.match.params.id)},/*#__PURE__*/React.createElement(\"button\",null,\"Cancel\")))),/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"h1\",null,\" Delete this entry? \"),/*#__PURE__*/React.createElement(\"button\",{className:\"deleteButton\",onClick:this.handleDelete},\"Delete (PERMANENT)\")));}}]);return EditEntry;}(Component);export default withRouter(EditEntry);","map":{"version":3,"sources":["/Users/bowserhsu/Documents/React/eitri-site-journal/client/src/components/Entries/EditEntry.jsx"],"names":["React","Component","withRouter","Link","getEntry","updateEntry","deleteEntry","confirm","window","EditEntry","props","handleChange","e","stateName","setState","target","value","handleSubmit","preventDefault","state","inputNotes","errMsg","match","params","id","notes","response","history","push","console","log","message","handleDelete","confirm1","confirm2","projectID","project","_id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withRouter, Link } from 'react-router-dom'\nimport { getEntry, updateEntry, deleteEntry } from '../../services/apiCalls'\n\nconst confirm = window.confirm \n\nclass EditEntry extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      inputNotes: '',\n      projectID: '',\n      errMsg: ''\n    }\n  }\n\n  async componentDidMount() {\n    try {\n      const response = await getEntry(this.props.match.params.id)\n      this.setState({\n        inputNotes: response.notes,\n        projectID: response.project._id \n      })\n    } catch (error) {\n      console.log(error.message)\n      this.setState({\n        errMsg: error.message \n      })\n    }\n  }\n\n  handleChange = (e, stateName) => {\n    // sets e.target.value to whatever state is named\n    this.setState({\n      [stateName]: e.target.value \n    })\n  }\n\n  handleSubmit = async (e) => {\n    e.preventDefault()\n\n    if (!this.state.inputNotes) {\n      this.setState({\n        errMsg: 'Entry name is required!'\n      })\n    } else {\n      try {\n        const response = await updateEntry(this.props.match.params.id,{\n          notes: this.state.inputNotes\n        })\n\n        this.props.history.push(`/entries/${this.props.match.params.id}`)\n      } catch (error) {\n        console.log(error.message)\n        this.setState({\n          errMsg: error.message \n        })\n      }\n    }\n  }\n\n  handleDelete = async () => {\n    const confirm1 = confirm('Do you want to delete this entry? WARNING: PERMANENT!!!')\n    \n    if (confirm1) {\n      const confirm2 = confirm('FINAL WARNING: DELETION PERMANENT! PROCEED?!?')\n\n      if (confirm2) {\n        try {\n          const response = await deleteEntry(this.props.match.params.id)\n\n          console.log(response)\n\n          this.props.history.push(`/projects/${this.state.projectID}`)\n        } catch (error) {\n          console.log(error.message) \n          this.setState({\n            errMsg: error.message \n          })\n        }\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"Page\">\n        <section>\n        <h1>Edit the note for this entry</h1>\n        <form className=\"UpdateForm\" onSubmit={this.handleSubmit}>\n          <label htmlFor=\"entryName\">Entry Notes</label>\n          <textarea value={this.state.inputNotes} onChange={e => this.handleChange(e, 'inputNotes')} name=\"entryName\" />\n\n            <button>Edit Entry</button>\n            <Link to={`/entries/${this.props.match.params.id}`}><button>Cancel</button></Link>\n            \n        </form>\n        </section>\n        \n        <section>\n          <h1> Delete this entry? </h1>\n          <button className=\"deleteButton\" onClick={this.handleDelete}>Delete (PERMANENT)</button>\n        </section>\n      </div>\n    )\n  }\n}\n\nexport default withRouter(EditEntry)"]},"metadata":{},"sourceType":"module"}