{"ast":null,"code":"import axios from 'axios';\n\nconst getToken = () => {\n  return new Promise(resolve => {\n    console.log('apiConfig token: ', localStorage.getItem('token'));\n    resolve(`Bearer ${localStorage.getItem('token') || null}`);\n  });\n};\n\nlet apiUrl;\nconst apiUrls = {\n  production: 'https://eitri-site-journal.herokuapp.com/api/',\n  development: 'http://localhost:3000/api'\n};\n\nif (window.location.hostname === 'localhost') {\n  apiUrl = apiUrls.development;\n} else {\n  apiUrl = apiUrls.production;\n}\n\nconst api = axios.create({\n  baseURL: apiUrl\n});\napi.interceptors.request.use(async function (options) {\n  options.headers['Authorization'] = await getToken();\n  console.log('option headers', options.headers);\n  options.headers['Access-Control-Allow-Origin'] = '*';\n  return options;\n}, function (error) {\n  console.log('Request error: ', error);\n  return Promise.reject(error);\n});\nexport default api;","map":{"version":3,"sources":["/Users/bowserhsu/Documents/React/eitri-site-journal/client/src/services/apiConfig.js"],"names":["axios","getToken","Promise","resolve","console","log","localStorage","getItem","apiUrl","apiUrls","production","development","window","location","hostname","api","create","baseURL","interceptors","request","use","options","headers","error","reject"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AAErB,SAAO,IAAIC,OAAJ,CAAYC,OAAO,IAAI;AAC5BC,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAjC;AACAJ,IAAAA,OAAO,CAAE,UAASG,YAAY,CAACC,OAAb,CAAqB,OAArB,KAAiC,IAAK,EAAjD,CAAP;AACD,GAHM,CAAP;AAKD,CAPD;;AASA,IAAIC,MAAJ;AAEA,MAAMC,OAAO,GAAG;AACdC,EAAAA,UAAU,EAAE,+CADE;AAEdC,EAAAA,WAAW,EAAE;AAFC,CAAhB;;AAKA,IAAIC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,KAA6B,WAAjC,EAA8C;AAC5CN,EAAAA,MAAM,GAAGC,OAAO,CAACE,WAAjB;AACD,CAFD,MAEO;AACLH,EAAAA,MAAM,GAAGC,OAAO,CAACC,UAAjB;AACD;;AAED,MAAMK,GAAG,GAAGf,KAAK,CAACgB,MAAN,CAAa;AACvBC,EAAAA,OAAO,EAAET;AADc,CAAb,CAAZ;AAIAO,GAAG,CAACG,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CAA6B,gBAAgBC,OAAhB,EAAyB;AACpDA,EAAAA,OAAO,CAACC,OAAR,CAAgB,eAAhB,IAAmC,MAAMrB,QAAQ,EAAjD;AACAG,EAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BgB,OAAO,CAACC,OAAtC;AACAD,EAAAA,OAAO,CAACC,OAAR,CAAgB,6BAAhB,IAAiD,GAAjD;AACA,SAAOD,OAAP;AACD,CALD,EAKG,UAAUE,KAAV,EAAiB;AAClBnB,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BkB,KAA/B;AACA,SAAOrB,OAAO,CAACsB,MAAR,CAAeD,KAAf,CAAP;AAED,CATD;AAWA,eAAeR,GAAf","sourcesContent":["import axios from 'axios'\n\nconst getToken = () => {\n\n  return new Promise(resolve => {\n    console.log('apiConfig token: ', localStorage.getItem('token'))\n    resolve(`Bearer ${localStorage.getItem('token') || null}`)\n  })\n\n}\n\nlet apiUrl\n\nconst apiUrls = {\n  production: 'https://eitri-site-journal.herokuapp.com/api/',\n  development: 'http://localhost:3000/api'\n}\n\nif (window.location.hostname === 'localhost') {\n  apiUrl = apiUrls.development\n} else {\n  apiUrl = apiUrls.production\n}\n\nconst api = axios.create({\n  baseURL: apiUrl\n})\n\napi.interceptors.request.use(async function (options) {\n  options.headers['Authorization'] = await getToken()\n  console.log('option headers', options.headers)\n  options.headers['Access-Control-Allow-Origin'] = '*'\n  return options\n}, function (error) {\n  console.log('Request error: ', error)\n  return Promise.reject(error)\n\n});\n\nexport default api"]},"metadata":{},"sourceType":"module"}