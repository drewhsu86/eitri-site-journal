{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';var getToken=function getToken(){return new Promise(function(resolve){resolve(\"Bearer \".concat(localStorage.getItem('token')||null));});};var apiUrl;var apiUrls={production:'https://eitri-site-journal.herokuapp.com/api/',development:'http://localhost:3000/api'};if(window.location.hostname==='localhost'){apiUrl=apiUrls.development;}else{apiUrl=apiUrls.production;}var api=axios.create({baseURL:apiUrl});api.interceptors.request.use(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(options){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getToken();case 2:options.headers['Authorization']=_context.sent;return _context.abrupt(\"return\",options);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),function(error){console.log('Request error: ',error);return Promise.reject(error);});export default api;","map":{"version":3,"sources":["/Users/bowserhsu/Documents/React/eitri-site-journal/client/src/services/apiConfig.js"],"names":["axios","getToken","Promise","resolve","localStorage","getItem","apiUrl","apiUrls","production","development","window","location","hostname","api","create","baseURL","interceptors","request","use","options","headers","error","console","log","reject"],"mappings":"+VAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CAErB,MAAO,IAAIC,CAAAA,OAAJ,CAAY,SAAAC,OAAO,CAAI,CAC5BA,OAAO,kBAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,GAAiC,IAA5C,EAAP,CACD,CAFM,CAAP,CAID,CAND,CAQA,GAAIC,CAAAA,MAAJ,CAEA,GAAMC,CAAAA,OAAO,CAAG,CACdC,UAAU,CAAE,+CADE,CAEdC,WAAW,CAAE,2BAFC,CAAhB,CAKA,GAAIC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,GAA6B,WAAjC,CAA8C,CAC5CN,MAAM,CAAGC,OAAO,CAACE,WAAjB,CACD,CAFD,IAEO,CACLH,MAAM,CAAGC,OAAO,CAACC,UAAjB,CACD,CAED,GAAMK,CAAAA,GAAG,CAAGb,KAAK,CAACc,MAAN,CAAa,CACvBC,OAAO,CAAET,MADc,CAAb,CAAZ,CAIAO,GAAG,CAACG,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,0FAA6B,iBAAgBC,OAAhB,wIACclB,CAAAA,QAAQ,EADtB,QAC3BkB,OAAO,CAACC,OAAR,CAAgB,eAAhB,CAD2B,+CAEpBD,OAFoB,wDAA7B,+DAGG,SAAUE,KAAV,CAAiB,CAClBC,OAAO,CAACC,GAAR,CAAY,iBAAZ,CAA+BF,KAA/B,EACA,MAAOnB,CAAAA,OAAO,CAACsB,MAAR,CAAeH,KAAf,CAAP,CAED,CAPD,EASA,cAAeR,CAAAA,GAAf","sourcesContent":["import axios from 'axios'\n\nconst getToken = () => {\n\n  return new Promise(resolve => {\n    resolve(`Bearer ${localStorage.getItem('token') || null}`)\n  })\n\n}\n\nlet apiUrl\n\nconst apiUrls = {\n  production: 'https://eitri-site-journal.herokuapp.com/api/',\n  development: 'http://localhost:3000/api'\n}\n\nif (window.location.hostname === 'localhost') {\n  apiUrl = apiUrls.development\n} else {\n  apiUrl = apiUrls.production\n}\n\nconst api = axios.create({\n  baseURL: apiUrl\n})\n\napi.interceptors.request.use(async function (options) {\n  options.headers['Authorization'] = await getToken()\n  return options\n}, function (error) {\n  console.log('Request error: ', error)\n  return Promise.reject(error)\n\n});\n\nexport default api"]},"metadata":{},"sourceType":"module"}