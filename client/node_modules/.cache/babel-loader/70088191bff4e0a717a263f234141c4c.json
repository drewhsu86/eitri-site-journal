{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{withRouter,Link}from'react-router-dom';import{getEntry,removeImage}from'../../services/apiCalls';import AddImage from'./AddImage';var ViewEntry=/*#__PURE__*/function(_Component){_inherits(ViewEntry,_Component);var _super=_createSuper(ViewEntry);function ViewEntry(props){var _this;_classCallCheck(this,ViewEntry);_this=_super.call(this,props);_this.initialize=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getEntry(_this.props.match.params.id);case 3:response=_context.sent;_this.setState({entry:response,addImg:false});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));_this.toggleAddImg=function(){var addImg=!_this.state.addImg;_this.setState({addImg:addImg});};_this.handleRemoveImg=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id,ind){var removeConfirm;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:removeConfirm=window.confirm('Really delete image? WARNING: PERMANENT!!!');if(!removeConfirm){_context2.next=12;break;}_context2.prev=2;_context2.next=5;return removeImage(id,ind);case 5:_context2.next=7;return _this.initialize();case 7:_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0.message);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[2,9]]);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}();_this.state={entry:null,addImg:false};return _this;}_createClass(ViewEntry,[{key:\"componentDidMount\",value:function componentDidMount(){this.initialize();}},{key:\"render\",value:function render(){var _this2=this;var entry=this.state.entry;if(!entry){return/*#__PURE__*/React.createElement(\"div\",{className:\"Page\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Entry not found!\"));}else{var project=entry.project;return/*#__PURE__*/React.createElement(\"div\",{className:\"Page\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Entry Notes\"),/*#__PURE__*/React.createElement(\"p\",null,entry.notes),/*#__PURE__*/React.createElement(\"h4\",null,\"Project: \",project.name),/*#__PURE__*/React.createElement(\"h4\",null,\"Entry Created: \",entry.createdAt.slice(0,10)),/*#__PURE__*/React.createElement(Link,{to:\"/projects/\".concat(entry.project._id)},/*#__PURE__*/React.createElement(\"button\",null,\"Back To Project\")),this.props.userID===project.user?/*#__PURE__*/React.createElement(Link,{to:\"/entries/\".concat(this.props.match.params.id,\"/editentry\")},/*#__PURE__*/React.createElement(\"button\",null,\"Edit Entry\")):null,this.props.userID===project.user?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{onClick:this.toggleAddImg},!this.state.addImg?'Add An Image':'Hide Image Adder'),!this.state.addImg?null:/*#__PURE__*/React.createElement(AddImage,{entryID:this.props.match.params.id,entryReset:this.initialize}),\" \"):null,/*#__PURE__*/React.createElement(\"div\",{className:\"imgGrid\"},entry.images.map(function(image,ind){return/*#__PURE__*/React.createElement(\"div\",{className:\"imgGridItem\",key:ind},/*#__PURE__*/React.createElement(\"a\",{href:image,target:\"_blank\"},/*#__PURE__*/React.createElement(\"img\",{className:\"ImagePreview\",src:image,alt:\"This is a link to an image.\"})),/*#__PURE__*/React.createElement(\"button\",{className:\"ImageRemoveButton\",onClick:function onClick(){return _this2.handleRemoveImg(_this2.props.match.params.id,ind);}},\"Delete Image?\"));})));}}}]);return ViewEntry;}(Component);export default withRouter(ViewEntry);","map":{"version":3,"sources":["/Users/bowserhsu/Documents/React/eitri-site-journal/client/src/components/Entries/ViewEntry.jsx"],"names":["React","Component","withRouter","Link","getEntry","removeImage","AddImage","ViewEntry","props","initialize","match","params","id","response","setState","entry","addImg","console","log","message","toggleAddImg","state","handleRemoveImg","ind","removeConfirm","window","confirm","project","notes","name","createdAt","slice","_id","userID","user","images","map","image"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withRouter, Link } from 'react-router-dom'\nimport { getEntry, removeImage } from '../../services/apiCalls'\nimport AddImage from './AddImage'\n\nclass ViewEntry extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      entry: null,\n      addImg: false \n    }\n  }\n\n  componentDidMount() {\n    this.initialize()\n  }\n\n  initialize = async () => {\n    try {\n      const response = await getEntry(this.props.match.params.id)\n\n      this.setState({\n        entry: response,\n        addImg: false \n      })\n    } catch (error) {\n      console.log(error.message)\n    }\n  }\n\n  toggleAddImg = () => {\n    const addImg = !this.state.addImg\n    this.setState({\n      addImg\n    })\n  }\n\n  handleRemoveImg = async (id, ind) => {\n    const removeConfirm = window.confirm('Really delete image? WARNING: PERMANENT!!!')\n    if (removeConfirm) {\n      try {\n        await removeImage(id, ind)\n        await this.initialize()\n      } catch (error) {\n        console.log(error.message)\n      }\n    }\n  }\n\n  render() {\n    const entry = this.state.entry \n    if (!entry) {\n      return (\n        <div className=\"Page\">\n          <h1>Entry not found!</h1>\n        </div>\n      )\n    } else {\n      const project = entry.project \n      return (\n        <div className=\"Page\">\n          <h1>Entry Notes</h1>\n\n          <p>{entry.notes}</p>\n\n          <h4>Project: {project.name}</h4>\n\n          <h4>Entry Created: {entry.createdAt.slice(0,10)}</h4>\n          \n          <Link to={`/projects/${entry.project._id}`}>\n            <button>Back To Project</button>\n          </Link>\n\n          {\n            this.props.userID === project.user ? (\n              <Link to={`/entries/${this.props.match.params.id}/editentry`}><button>Edit Entry</button></Link>\n            ) : null \n          }\n          \n          {this.props.userID === project.user ? <div>\n            <button onClick={this.toggleAddImg}>{!this.state.addImg ? 'Add An Image' : 'Hide Image Adder'}</button>\n            {\n              !this.state.addImg ? null : (\n                <AddImage\n                  entryID={this.props.match.params.id}\n                  entryReset={this.initialize}\n                />\n              )\n            } </div> : null \n          }\n\n          <div className=\"imgGrid\">\n            {\n              entry.images.map((image, ind) => {\n                return (<div className=\"imgGridItem\" key={ind}>\n                  \n                    <a href={image} target=\"_blank\">\n                    <img className=\"ImagePreview\"\n                      src={image} alt={`This is a link to an image.`} />\n                    </a>\n                    <button\n                      className=\"ImageRemoveButton\"\n                      onClick={() => this.handleRemoveImg(this.props.match.params.id, ind)}\n                    >\n                      Delete Image?\n                    </button>\n                  \n                </div>)\n              })\n            }\n          </div>\n        </div>\n      )\n    }\n  }\n}\n\nexport default withRouter(ViewEntry)"]},"metadata":{},"sourceType":"module"}