{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import FileBase64 from'react-file-base64';import axios from'axios';var Upload=/*#__PURE__*/function(_Component){_inherits(Upload,_Component);var _super=_createSuper(Upload);function Upload(){var _this;_classCallCheck(this,Upload);_this=_super.call(this);_this.setFile=function(file){_this.setState({file:file});};_this.uploadFile=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var file,base64,name,response,images;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;file=_this.state.file;base64=file.base64.split(',')[1];name=file.file.name;_context.next=6;return axios.post(\"http://localhost:3000/api/imgur/upload\",{base64:base64,name:name});case 6:response=_context.sent;console.log(response);images=_this.state.images;images.push(response.data.link);_this.setState({images:images});_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);_this.setState({errMsg:_context.t0.message});case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));_this.state={file:null,errMsg:'',images:[]};return _this;}_createClass(Upload,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"Page\"},/*#__PURE__*/React.createElement(FileBase64,{multiple:false,onDone:this.setFile}),this.state.file===null?null:/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{onClick:this.uploadFile},\"Upload to Imgur\"),/*#__PURE__*/React.createElement(\"span\",null,this.state.errMsg)),/*#__PURE__*/React.createElement(\"ul\",null,this.state.images.map(function(imageURL,ind){return/*#__PURE__*/React.createElement(\"li\",{key:ind},/*#__PURE__*/React.createElement(\"a\",{href:imageURL,target:\"_blank\"},imageURL));})));}}]);return Upload;}(Component);export{Upload as default};","map":{"version":3,"sources":["/Users/bowserhsu/Documents/React/eitri-site-journal/client/src/components/Upload.jsx"],"names":["React","Component","FileBase64","axios","Upload","setFile","file","setState","uploadFile","state","base64","split","name","post","response","console","log","images","push","data","link","errMsg","message","map","imageURL","ind"],"mappings":"mhCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,UAAP,KAAuB,mBAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,GAEqBC,CAAAA,M,gGACnB,iBAAc,wCACZ,wBADY,MAUdC,OAVc,CAUJ,SAACC,IAAD,CAAU,CAClB,MAAKC,QAAL,CAAc,CACZD,IAAI,CAAJA,IADY,CAAd,EAGD,CAda,OAgBdE,UAhBc,sEAgBD,wLAEHF,IAFG,CAEI,MAAKG,KAAL,CAAWH,IAFf,CAGHI,MAHG,CAGMJ,IAAI,CAACI,MAAL,CAAYC,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAHN,CAIHC,IAJG,CAIIN,IAAI,CAACA,IAAL,CAAUM,IAJd,uBAMcT,CAAAA,KAAK,CAACU,IAAN,CAAW,wCAAX,CAAqD,CAAEH,MAAM,CAANA,MAAF,CAAUE,IAAI,CAAJA,IAAV,CAArD,CANd,QAMHE,QANG,eAQTC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EAEMG,MAVG,CAUM,MAAKR,KAAL,CAAWQ,MAVjB,CAWTA,MAAM,CAACC,IAAP,CAAYJ,QAAQ,CAACK,IAAT,CAAcC,IAA1B,EACA,MAAKb,QAAL,CAAc,CACZU,MAAM,CAANA,MADY,CAAd,EAZS,iFAgBT,MAAKV,QAAL,CAAc,CACZc,MAAM,CAAE,YAAGC,OADC,CAAd,EAhBS,qEAhBC,GAGZ,MAAKb,KAAL,CAAa,CACXH,IAAI,CAAE,IADK,CAEXe,MAAM,CAAE,EAFG,CAGXJ,MAAM,CAAE,EAHG,CAAb,CAHY,aAQb,C,0DA8BQ,CACP,mBACE,2BAAK,SAAS,CAAC,MAAf,eACE,oBAAC,UAAD,EACE,QAAQ,CAAE,KADZ,CAEE,MAAM,CAAE,KAAKZ,OAFf,EADF,CAMI,KAAKI,KAAL,CAAWH,IAAX,GAAoB,IAApB,CAA2B,IAA3B,cAAkC,4CAChC,8BAAQ,OAAO,CAAE,KAAKE,UAAtB,oBADgC,cAEhC,gCAAO,KAAKC,KAAL,CAAWY,MAAlB,CAFgC,CANtC,cAYI,8BACG,KAAKZ,KAAL,CAAWQ,MAAX,CAAkBM,GAAlB,CAAsB,SAACC,QAAD,CAAWC,GAAX,CAAmB,CACxC,mBAAO,0BAAI,GAAG,CAAEA,GAAT,eAAc,yBAAG,IAAI,CAAED,QAAT,CAAmB,MAAM,CAAC,QAA1B,EAAoCA,QAApC,CAAd,CAAP,CACD,CAFA,CADH,CAZJ,CADF,CAqBD,C,oBA7DiCvB,S,SAAfG,M","sourcesContent":["import React, { Component } from 'react'\nimport FileBase64 from 'react-file-base64'\nimport axios from 'axios'\n\nexport default class Upload extends Component {\n  constructor() {\n    super()\n\n    this.state = {\n      file: null,\n      errMsg: '',\n      images: []\n    }\n  }\n\n  setFile = (file) => {\n    this.setState({\n      file\n    })\n  }\n\n  uploadFile = async () => {\n    try {\n      const file = this.state.file\n      const base64 = file.base64.split(',')[1]\n      const name = file.file.name\n\n      const response = await axios.post(\"http://localhost:3000/api/imgur/upload\", { base64, name })\n\n      console.log(response)\n\n      const images = this.state.images \n      images.push(response.data.link)\n      this.setState({\n        images\n      })\n    } catch (er) {\n      this.setState({\n        errMsg: er.message\n      })\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"Page\">\n        <FileBase64\n          multiple={false}\n          onDone={this.setFile}\n        />\n        {\n          this.state.file === null ? null : <div>\n            <button onClick={this.uploadFile}>Upload to Imgur</button>\n            <span>{this.state.errMsg}</span>\n            </div>\n        }\n        {\n          <ul>\n            {this.state.images.map((imageURL, ind) => {\n              return <li key={ind}><a href={imageURL} target=\"_blank\">{imageURL}</a></li>\n            })}\n          </ul>\n        }\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}