{"ast":null,"code":"var _jsxFileName = \"/Users/bowserhsu/Documents/React/eitri-site-journal/client/src/components/Entries/AddImage.jsx\";\nimport React, { Component } from 'react';\nimport FileBase64 from 'react-file-base64';\nimport { addImage, imgurImage } from '../../services/apiCalls';\nconst IMGUR_BUTTON = 'Upload Using Imgur Or Image URL';\nconst IMGUR_LOADING = 'Uploading...';\nexport default class AddImage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = (e, stateName) => {\n      // sets e.target.value to whatever state is named\n      this.setState({\n        [stateName]: e.target.value\n      });\n    };\n\n    this.handleImgur = async file => {\n      if (this.state.imgurBtn === IMGUR_BUTTON) {\n        // change the button state and then api call \n        this.setState({\n          imgurBtn: IMGUR_LOADING,\n          imgFile: file\n        });\n\n        try {\n          const response = await imgurImage({\n            base64: file.base64.split(',')[1],\n            name: file.file.name\n          });\n          console.log(response);\n          const addResponse = await addImage(this.props.entryID, response.link);\n          console.log(addResponse);\n          this.setState({\n            imgFile: null,\n            errMsg: 'Imgur Upload Successful',\n            imgurBtn: IMGUR_BUTTON,\n            inputURL: ''\n          });\n          this.props.entryReset();\n        } catch (error) {\n          console.log(error.message);\n          this.setState({\n            imgFile: null,\n            errMsg: error.message,\n            imgurBtn: IMGUR_BUTTON\n          });\n        }\n      }\n    };\n\n    this.handleAddImage = async () => {\n      try {\n        const response = await addImage(this.props.entryID, this.state.inputURL);\n        console.log(response);\n      } catch (error) {\n        console.log(error.message);\n        this.setState({\n          errMsg: error.message\n        });\n      }\n    };\n\n    this.state = {\n      imgFile: null,\n      inputURL: '',\n      errMsg: '',\n      imgurBtn: IMGUR_BUTTON\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"AddImage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }\n    }, this.state.imgurBtn), this.state.errMsg ? /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 31\n      }\n    }, this.state.errMsg) : null, /*#__PURE__*/React.createElement(FileBase64, {\n      multiple: false,\n      onDone: this.handleImgur,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"inputURL\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }\n    }, \"Enter Or Edit Image URL\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.inputURL,\n      onChange: e => this.handleChange(e, 'inputURL'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }\n    }), this.state.inputURL ? /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleAddImage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 33\n      }\n    }, \"Add Image URL To Entry\") : null);\n  }\n\n}","map":{"version":3,"sources":["/Users/bowserhsu/Documents/React/eitri-site-journal/client/src/components/Entries/AddImage.jsx"],"names":["React","Component","FileBase64","addImage","imgurImage","IMGUR_BUTTON","IMGUR_LOADING","AddImage","constructor","props","handleChange","e","stateName","setState","target","value","handleImgur","file","state","imgurBtn","imgFile","response","base64","split","name","console","log","addResponse","entryID","link","errMsg","inputURL","entryReset","error","message","handleAddImage","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport FileBase64 from 'react-file-base64'\nimport { addImage, imgurImage } from '../../services/apiCalls'\n\nconst IMGUR_BUTTON = 'Upload Using Imgur Or Image URL'\nconst IMGUR_LOADING = 'Uploading...'\n\nexport default class AddImage extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      imgFile: null,\n      inputURL: '',\n      errMsg: '',\n      imgurBtn: IMGUR_BUTTON\n    }\n  }\n\n  handleChange = (e, stateName) => {\n    // sets e.target.value to whatever state is named\n    this.setState({\n      [stateName]: e.target.value \n    })\n  }\n\n  handleImgur = async (file) => {\n    if (this.state.imgurBtn === IMGUR_BUTTON) {\n      // change the button state and then api call \n      this.setState({\n        imgurBtn: IMGUR_LOADING,\n        imgFile: file \n      })\n      try {\n        const response = await imgurImage({\n          base64: file.base64.split(',')[1],\n          name: file.file.name \n        })\n\n        console.log(response)\n\n        const addResponse = await addImage(this.props.entryID, response.link)\n\n        console.log(addResponse)\n\n        this.setState({\n          imgFile: null,\n          errMsg: 'Imgur Upload Successful',\n          imgurBtn: IMGUR_BUTTON,\n          inputURL: ''\n        })\n\n        this.props.entryReset()\n      } catch (error) {\n        console.log(error.message)\n        this.setState({\n          imgFile: null,\n          errMsg: error.message,\n          imgurBtn: IMGUR_BUTTON\n        })\n      }\n    }\n  }\n\n  handleAddImage = async () => {\n    try {\n      const response = await addImage(this.props.entryID, this.state.inputURL)\n\n      console.log(response) \n\n    } catch (error) {\n        console.log(error.message)\n        this.setState({\n          errMsg: error.message\n        })\n      }\n  }\n\n  render() {\n    return (\n      <div className=\"AddImage\">\n        <h3>{this.state.imgurBtn}</h3>\n\n        {\n          this.state.errMsg ? <h4>{this.state.errMsg}</h4> : null \n        }\n\n        <FileBase64\n          multiple={false}\n          onDone={this.handleImgur}\n        />\n\n        <label htmlFor=\"inputURL\">Enter Or Edit Image URL</label>\n        <input \n          type=\"text\"\n          value={this.state.inputURL}\n          onChange={e => this.handleChange(e, 'inputURL')}\n        />\n        \n        {\n          this.state.inputURL ? <button onClick={this.handleAddImage}>Add Image URL To Entry</button> : null \n        }\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}