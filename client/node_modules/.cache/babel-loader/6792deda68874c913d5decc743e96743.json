{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./App.css';import{Route,withRouter,Redirect}from'react-router-dom';import{verifyuser}from'./services/apiUsers';import Upload from'./components/Upload';import Nav from'./components/Nav';import Signup from'./components/User/Signup';import Signin from'./components/User/Signin';import Projects from'./components/Projects';import AddProject from'./components/Projects/AddProject';import ViewProject from'./components/Projects/ViewProject';import EditProject from'./components/Projects/EditProject';import AddEntry from'./components/Entries/AddEntry';import ViewEntry from'./components/Entries/ViewEntry';import EditEntry from'./components/Entries/EditEntry';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);// token will be stored in local storage \n// but username should be stored in state \n// to indicate if you are logged in \n_this.setUser=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return verifyuser();case 3:response=_context.sent;_this.setState({username:response.username,userID:response.id});return _context.abrupt(\"return\",true);case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);return _context.abrupt(\"return\",false);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));_this.logOut=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;localStorage.removeItem('token');_this.setState({username:null,userID:null});_this.props.history.push('/');_context2.next=10;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0.message);return _context2.abrupt(\"return\",_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));_this.state={username:null,userID:null};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){this.setUser();}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(Nav,{username:this.state.username,logOut:this.logOut}),/*#__PURE__*/React.createElement(Route,{path:\"/\",exact:true},this.state.username!==null&&this.state.userID!==null?/*#__PURE__*/React.createElement(Redirect,{to:\"/users/\".concat(this.state.userID)}):/*#__PURE__*/React.createElement(Signin,{setUser:this.setUser})),/*#__PURE__*/React.createElement(Route,{path:\"/uploadTest\",exact:true},/*#__PURE__*/React.createElement(Upload,null)),/*#__PURE__*/React.createElement(Route,{path:\"/signup\",exact:true},/*#__PURE__*/React.createElement(Signup,{setUser:this.setUser})),/*#__PURE__*/React.createElement(Route,{path:\"/users/:id\"},/*#__PURE__*/React.createElement(Projects,{userID:this.state.userID,username:this.state.username})),/*#__PURE__*/React.createElement(Route,{path:\"/addproject\"},/*#__PURE__*/React.createElement(AddProject,null)),/*#__PURE__*/React.createElement(Route,{path:\"/projects/:id\",exact:true},/*#__PURE__*/React.createElement(ViewProject,{userID:this.state.userID})),/*#__PURE__*/React.createElement(Route,{path:\"/projects/:id/addentry\",exact:true},/*#__PURE__*/React.createElement(AddEntry,{userID:this.state.userID})),/*#__PURE__*/React.createElement(Route,{path:\"/projects/:id/editproject\",exact:true},/*#__PURE__*/React.createElement(EditProject,{userID:this.state.userID})),/*#__PURE__*/React.createElement(Route,{path:\"/entries/:id\",exact:true},/*#__PURE__*/React.createElement(ViewEntry,{userID:this.state.userID})),/*#__PURE__*/React.createElement(Route,{path:\"/entries/:id/editentry\",exact:true},/*#__PURE__*/React.createElement(EditEntry,{userID:this.state.userID})));}}]);return App;}(Component);export default withRouter(App);","map":{"version":3,"sources":["/Users/bowserhsu/Documents/React/eitri-site-journal/client/src/App.js"],"names":["React","Component","Route","withRouter","Redirect","verifyuser","Upload","Nav","Signup","Signin","Projects","AddProject","ViewProject","EditProject","AddEntry","ViewEntry","EditEntry","App","setUser","response","setState","username","userID","id","console","log","message","logOut","localStorage","removeItem","props","history","push","state"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './App.css'\nimport { Route, withRouter, Redirect } from 'react-router-dom'\nimport { verifyuser } from './services/apiUsers'\n\nimport Upload from './components/Upload'\nimport Nav from './components/Nav'\nimport Signup from './components/User/Signup'\nimport Signin from './components/User/Signin'\nimport Projects from './components/Projects'\nimport AddProject from './components/Projects/AddProject'\nimport ViewProject from './components/Projects/ViewProject'\nimport EditProject from './components/Projects/EditProject'\nimport AddEntry from './components/Entries/AddEntry'\nimport ViewEntry from './components/Entries/ViewEntry'\nimport EditEntry from './components/Entries/EditEntry'\n\nclass App extends Component {\n  constructor() {\n    super()\n\n    // token will be stored in local storage \n    // but username should be stored in state \n    // to indicate if you are logged in \n    this.state = {\n      username: null,\n      userID: null \n    }\n  }\n\n  componentDidMount() {\n    this.setUser()\n  }\n\n  setUser = async () => {\n    try {\n      const response = await verifyuser()\n\n      this.setState({\n        username: response.username,\n        userID: response.id \n      })\n      return true \n    } catch (error) {\n      console.log(error.message)\n      return false\n    }\n  }\n\n  logOut = async () => {\n    try {\n      localStorage.removeItem('token')\n      this.setState({\n        username: null,\n        userID: null \n      })\n      this.props.history.push('/')\n    } catch (error) {\n      console.log(error.message)\n      return error\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        \n        <Nav username={this.state.username} logOut={this.logOut} />\n\n        <Route path=\"/\" exact>\n          {this.state.username !== null && this.state.userID !== null ? <Redirect to={`/users/${this.state.userID}`} /> : <Signin setUser={this.setUser} />}\n        </Route>\n\n        <Route path=\"/uploadTest\" exact>\n          <Upload />\n        </Route>\n\n        <Route path=\"/signup\" exact>\n          <Signup setUser={this.setUser} />\n        </Route>\n\n        <Route path=\"/users/:id\">\n          <Projects userID={this.state.userID} username={this.state.username} />\n        </Route>\n\n        <Route path=\"/addproject\">\n          <AddProject />\n        </Route>\n\n        <Route path=\"/projects/:id\" exact>\n          <ViewProject userID={this.state.userID} />\n        </Route>\n\n        <Route path=\"/projects/:id/addentry\" exact>\n          <AddEntry userID={this.state.userID} />\n        </Route>\n\n        <Route path=\"/projects/:id/editproject\" exact>\n          <EditProject userID={this.state.userID} />\n        </Route>\n\n        <Route path=\"/entries/:id\" exact>\n          <ViewEntry userID={this.state.userID} />\n        </Route>\n\n        <Route path=\"/entries/:id/editentry\" exact>\n          <EditEntry userID={this.state.userID} />\n        </Route>\n\n      </div>\n    )\n  }\n}\n\nexport default withRouter(App)"]},"metadata":{},"sourceType":"module"}