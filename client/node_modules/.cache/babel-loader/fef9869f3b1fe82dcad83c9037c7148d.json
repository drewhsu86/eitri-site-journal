{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import{signin}from'../../services/apiUsers';var Signin=/*#__PURE__*/function(_Component){_inherits(Signin,_Component);var _super=_createSuper(Signin);function Signin(props){var _this;_classCallCheck(this,Signin);_this=_super.call(this,props);_this.handleChange=function(e,stateName){// sets e.target.value to whatever state is named\n_this.setState(_defineProperty({},stateName,e.target.value));};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();// submit using the username and password in the form \n// only allow submit if password is length 6 or greater \nif(!(_this.state.inputPassword.length>=6&&_this.state.inputUsername)){_context.next=18;break;}_context.prev=2;_context.next=5;return signin({username:_this.state.inputUsername,password:_this.state.inputPassword});case 5:response=_context.sent;console.log(response);// if token is successfully received, set the user data \n_context.next=9;return _this.props.setUser();case 9:_this.setState({username:'',password:''});_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);console.log(_context.t0.message);_this.setState({errMsg:_context.t0.message});case 16:_context.next=19;break;case 18:_this.setState({errMsg:'Password needs to be at least 6 characters.'});case 19:case\"end\":return _context.stop();}}},_callee,null,[[2,12]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={inputUsername:'',inputPassword:'',errMsg:''};return _this;}// password needs at least 6 characters \n// username and password each have a handleChange and are tied to the value of the input \n_createClass(Signin,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"Page\"},/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"form\",{className:\"SignupForm\",onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"h1\",null,\"Log In With Your Account\"),this.state.errMsg?/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},this.state.errMsg):null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"username\"},\"Username\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:this.state.inputUsername,onChange:function onChange(e){return _this2.handleChange(e,'inputUsername');},name:\"username\"}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",value:this.state.inputPassword,onChange:function onChange(e){return _this2.handleChange(e,'inputPassword');},name:\"password\"}),/*#__PURE__*/React.createElement(\"button\",null,\" Submit \")),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(Link,{to:\"/signup\"},\"Don't have an account? Register here\"))));}}]);return Signin;}(Component);export{Signin as default};","map":{"version":3,"sources":["/Users/bowserhsu/Documents/React/eitri-site-journal/client/src/components/User/Signin.jsx"],"names":["React","Component","Link","signin","Signin","props","handleChange","e","stateName","setState","target","value","handleSubmit","preventDefault","state","inputPassword","length","inputUsername","username","password","response","console","log","setUser","message","errMsg"],"mappings":"ssCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,MAAT,KAAuB,yBAAvB,C,GAEqBC,CAAAA,M,gGACnB,gBAAYC,KAAZ,CAAmB,wCACjB,uBAAMA,KAAN,EADiB,MAanBC,YAbmB,CAaJ,SAACC,CAAD,CAAIC,SAAJ,CAAkB,CAC/B;AACA,MAAKC,QAAL,oBACGD,SADH,CACeD,CAAC,CAACG,MAAF,CAASC,KADxB,GAGD,CAlBkB,OAoBnBC,YApBmB,0FAoBJ,iBAAOL,CAAP,+HACbA,CAAC,CAACM,cAAF,GACA;AAEA;AAJa,KAKT,MAAKC,KAAL,CAAWC,aAAX,CAAyBC,MAAzB,EAAmC,CAAnC,EAAwC,MAAKF,KAAL,CAAWG,aAL1C,iEAOcd,CAAAA,MAAM,CAAC,CAC5Be,QAAQ,CAAE,MAAKJ,KAAL,CAAWG,aADO,CAE5BE,QAAQ,CAAE,MAAKL,KAAL,CAAWC,aAFO,CAAD,CAPpB,QAOHK,QAPG,eAYTC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EAEA;AAdS,sBAeH,OAAKf,KAAL,CAAWkB,OAAX,EAfG,QAiBT,MAAKd,QAAL,CAAc,CACZS,QAAQ,CAAE,EADE,CAEZC,QAAQ,CAAE,EAFE,CAAd,EAjBS,iFAsBTE,OAAO,CAACC,GAAR,CAAY,YAAME,OAAlB,EACA,MAAKf,QAAL,CAAc,CACZgB,MAAM,CAAE,YAAMD,OADF,CAAd,EAvBS,uCA4BX,MAAKf,QAAL,CAAc,CACZgB,MAAM,CAAE,6CADI,CAAd,EA5BW,qEApBI,+DAGjB,MAAKX,KAAL,CAAa,CACXG,aAAa,CAAE,EADJ,CAEXF,aAAa,CAAE,EAFJ,CAGXU,MAAM,CAAE,EAHG,CAAb,CAHiB,aAQlB,CAED;AACA;0DA2CS,iBAEL,mBACE,2BAAK,SAAS,CAAC,MAAf,eACE,gDACA,4BAAM,SAAS,CAAC,YAAhB,CAA6B,QAAQ,CAAE,KAAKb,YAA5C,eACE,yDADF,CAEG,KAAKE,KAAL,CAAWW,MAAX,cAAoB,yBAAG,SAAS,CAAC,OAAb,EAAsB,KAAKX,KAAL,CAAWW,MAAjC,CAApB,CAAmE,IAFtE,cAIE,6BAAO,OAAO,CAAC,UAAf,aAJF,cAKE,6BAAO,IAAI,CAAC,MAAZ,CAAmB,KAAK,CAAE,KAAKX,KAAL,CAAWG,aAArC,CAAoD,QAAQ,CAAE,kBAAAV,CAAC,QAAI,CAAA,MAAI,CAACD,YAAL,CAAkBC,CAAlB,CAAqB,eAArB,CAAJ,EAA/D,CAA0G,IAAI,CAAC,UAA/G,EALF,cAOE,6BAAO,OAAO,CAAC,UAAf,aAPF,cAQE,6BAAO,IAAI,CAAC,UAAZ,CAAuB,KAAK,CAAE,KAAKO,KAAL,CAAWC,aAAzC,CAAwD,QAAQ,CAAE,kBAAAR,CAAC,QAAI,CAAA,MAAI,CAACD,YAAL,CAAkBC,CAAlB,CAAqB,eAArB,CAAJ,EAAnE,CAA8G,IAAI,CAAC,UAAnH,EARF,cAUE,6CAVF,CADA,cAaA,0CACE,oBAAC,IAAD,EAAM,EAAE,CAAC,SAAT,yCADF,CAbA,CADF,CADF,CAsBH,C,oBA/EiCN,S,SAAfG,M","sourcesContent":["import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\nimport { signin } from '../../services/apiUsers'\n\nexport default class Signin extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      inputUsername: '',\n      inputPassword: '',\n      errMsg: ''\n    }\n  }\n\n  // password needs at least 6 characters \n  // username and password each have a handleChange and are tied to the value of the input \n\n  handleChange = (e, stateName) => {\n    // sets e.target.value to whatever state is named\n    this.setState({\n      [stateName]: e.target.value \n    })\n  }\n\n  handleSubmit = async (e) => {\n    e.preventDefault()\n    // submit using the username and password in the form \n\n    // only allow submit if password is length 6 or greater \n    if (this.state.inputPassword.length >= 6 && this.state.inputUsername) {\n      try {\n        const response = await signin({\n          username: this.state.inputUsername,\n          password: this.state.inputPassword\n        })\n\n        console.log(response)\n\n        // if token is successfully received, set the user data \n        await this.props.setUser()\n\n        this.setState({\n          username: '',\n          password: ''\n        })\n      } catch (error) {\n        console.log(error.message)\n        this.setState({\n          errMsg: error.message \n        })\n      }\n    } else {\n      this.setState({\n        errMsg: 'Password needs to be at least 6 characters.'\n      })\n    }\n  }\n\n  render() {\n\n      return (\n        <div className=\"Page\">\n          <section>\n          <form className=\"SignupForm\" onSubmit={this.handleSubmit}>\n            <h1>Log In With Your Account</h1>\n            {this.state.errMsg ? <p className=\"error\">{this.state.errMsg}</p> : null}\n\n            <label htmlFor=\"username\">Username</label>\n            <input type=\"text\" value={this.state.inputUsername} onChange={e => this.handleChange(e, 'inputUsername')} name=\"username\" />\n\n            <label htmlFor=\"password\">Password</label>\n            <input type=\"password\" value={this.state.inputPassword} onChange={e => this.handleChange(e, 'inputPassword')} name=\"password\" />\n\n            <button> Submit </button>\n          </form>\n          <p>\n            <Link to=\"/signup\">Don't have an account? Register here</Link>\n          </p>\n          </section>\n        </div>\n      )\n    \n  }\n}\n"]},"metadata":{},"sourceType":"module"}