{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bowserhsu/Documents/React/eitri-site-journal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import FileBase64 from'react-file-base64';import{addImage,imgurImage}from'../../services/apiCalls';var IMGUR_BUTTON='Upload Using Imgur Or Image URL';var IMGUR_LOADING='Uploading...';var AddImage=/*#__PURE__*/function(_Component){_inherits(AddImage,_Component);var _super=_createSuper(AddImage);function AddImage(props){var _this;_classCallCheck(this,AddImage);_this=_super.call(this,props);_this.handleChange=function(e,stateName){// sets e.target.value to whatever state is named\n_this.setState(_defineProperty({},stateName,e.target.value));};_this.toBase64=function(file){return new Promise(function(resolve,reject){var reader=new FileReader();reader.readAsDataURL(file);reader.onload=function(){return resolve(reader.result);};reader.onerror=function(error){return reject(error);};});};_this.handleImgur=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var file,fileBase64,response,addResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(_this.state.imgurBtn===IMGUR_BUTTON)){_context.next=23;break;}// change the button state and then api call \n_this.setState({imgurBtn:IMGUR_LOADING});_context.prev=2;file=e.target.files[0];_context.next=6;return _this.toBase64(file);case 6:fileBase64=_context.sent;_context.next=9;return imgurImage({base64:fileBase64.split(',')[1],name:file.name});case 9:response=_context.sent;console.log(response);_context.next=13;return addImage(_this.props.entryID,response.link);case 13:addResponse=_context.sent;console.log(addResponse);_this.setState({errMsg:'Imgur Upload Successful',imgurBtn:IMGUR_BUTTON,inputURL:''});_this.props.entryReset();_context.next=23;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](2);console.log(_context.t0.message);_this.setState({errMsg:_context.t0.message,imgurBtn:IMGUR_BUTTON});case 23:case\"end\":return _context.stop();}}},_callee,null,[[2,19]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleAddImage=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return addImage(_this.props.entryID,_this.state.inputURL);case 3:response=_context2.sent;console.log(response);_context2.next=11;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0.message);_this.setState({errMsg:_context2.t0.message});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));_this.state={inputURL:'',errMsg:'',imgurBtn:IMGUR_BUTTON,camFile:null};return _this;}_createClass(AddImage,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"AddImage\"},/*#__PURE__*/React.createElement(\"h3\",null,this.state.imgurBtn),this.state.errMsg?/*#__PURE__*/React.createElement(\"h4\",null,this.state.errMsg):null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"inputFile\"},\"From Files Or Camera\"),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",accept:\"image/*\",capture:\"camera\",onChange:this.handleImgur,name:\"inputFile\"}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"inputURL\"},\"Enter Or Edit Image URL\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:this.state.inputURL,onChange:function onChange(e){return _this2.handleChange(e,'inputURL');}}),this.state.inputURL?/*#__PURE__*/React.createElement(\"button\",{onClick:this.handleAddImage},\"Add Image URL To Entry\"):null);}}]);return AddImage;}(Component);export{AddImage as default};","map":{"version":3,"sources":["/Users/bowserhsu/Documents/React/eitri-site-journal/client/src/components/Entries/AddImage.jsx"],"names":["React","Component","FileBase64","addImage","imgurImage","IMGUR_BUTTON","IMGUR_LOADING","AddImage","props","handleChange","e","stateName","setState","target","value","toBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","handleImgur","state","imgurBtn","files","fileBase64","base64","split","name","response","console","log","entryID","link","addResponse","errMsg","inputURL","entryReset","message","handleAddImage","camFile"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport FileBase64 from 'react-file-base64'\nimport { addImage, imgurImage } from '../../services/apiCalls'\n\nconst IMGUR_BUTTON = 'Upload Using Imgur Or Image URL'\nconst IMGUR_LOADING = 'Uploading...'\n\nexport default class AddImage extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      inputURL: '',\n      errMsg: '',\n      imgurBtn: IMGUR_BUTTON,\n      camFile: null \n    }\n  }\n\n  handleChange = (e, stateName) => {\n    // sets e.target.value to whatever state is named\n    this.setState({\n      [stateName]: e.target.value \n    })\n  }\n\n  // convert file to base64 \n  // from: https://stackoverflow.com/questions/36280818/how-to-convert-file-to-base64-in-javascript\n  toBase64 = file => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = error => reject(error);\n  });\n\n  handleImgur = async (e) => {\n    if (this.state.imgurBtn === IMGUR_BUTTON) {\n      // change the button state and then api call \n      this.setState({\n        imgurBtn: IMGUR_LOADING \n      })\n      try {\n\n        const file = e.target.files[0]\n        const fileBase64 = await this.toBase64(file)\n\n        const response = await imgurImage({\n          base64: fileBase64.split(',')[1],\n          name: file.name \n        })\n\n        console.log(response)\n\n        const addResponse = await addImage(this.props.entryID, response.link)\n\n        console.log(addResponse)\n\n        this.setState({\n          errMsg: 'Imgur Upload Successful',\n          imgurBtn: IMGUR_BUTTON,\n          inputURL: ''\n        })\n\n        this.props.entryReset()\n      } catch (error) {\n        console.log(error.message)\n        this.setState({\n          errMsg: error.message,\n          imgurBtn: IMGUR_BUTTON\n        })\n      }\n    }\n  }\n\n  handleAddImage = async () => {\n    try {\n      const response = await addImage(this.props.entryID, this.state.inputURL)\n\n      console.log(response) \n\n    } catch (error) {\n        console.log(error.message)\n        this.setState({\n          errMsg: error.message\n        })\n      }\n  }\n\n  render() {\n    return (\n      <div className=\"AddImage\">\n        <h3>{this.state.imgurBtn}</h3>\n\n        {\n          this.state.errMsg ? <h4>{this.state.errMsg}</h4> : null \n        }\n\n        <label htmlFor=\"inputFile\">From Files Or Camera</label>\n        <input type=\"file\" accept=\"image/*\" capture=\"camera\" onChange={this.handleImgur} name=\"inputFile\" />\n\n        <label htmlFor=\"inputURL\">Enter Or Edit Image URL</label>\n        <input \n          type=\"text\"\n          value={this.state.inputURL}\n          onChange={e => this.handleChange(e, 'inputURL')}\n        />\n        \n        {\n          this.state.inputURL ? <button onClick={this.handleAddImage}>Add Image URL To Entry</button> : null \n        }\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}